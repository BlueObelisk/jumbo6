<!--

       Copyright 2011 Peter Murray-Rust et. al.

       Licensed under the Apache License, Version 2.0 (the "License");
       you may not use this file except in compliance with the License.
       You may obtain a copy of the License at

           http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing, software
       distributed under the License is distributed on an "AS IS" BASIS,
       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       See the License for the specific language governing permissions and
       limitations under the License.

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11">

  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Unilever Centre for Molecular Informatics, Cambridge - The CML Blog</title>
  
  <meta name="generator" content="WordPress 2.0.4"><!--
-- leave this for stats ----> 
  <link rel="stylesheet" href="blog2_files/style.css" type="text/css" media="screen">
  <link rel="alternate" type="application/rss+xml" title="The CML Blog RSS Feed" href="http://wwmm.ch.cam.ac.uk/blogs/cml/?feed=rss2">
  <link rel="pingback" href="http://wwmm.ch.cam.ac.uk/blogs/cml/xmlrpc.php">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://wwmm.ch.cam.ac.uk/blogs/cml/xmlrpc.php?rsd"></head><body>
  <div class="top">
    <img src="blog2_files/ucbanner.png" alt="Unilever Centre for Molecular Informatics">
  </div>
  <div class="body">
    <div class="right">
      		<div class="navbar">
			<ul class="navbar2">
			
			<!-- <li class="pagenav">Pages<ul><li class="page_item"><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?page_id=2" title="About">About</a></li>
</ul></li> -->

			<li class="navhead"><h2>Archives</h2></li>
			<li class="navbody">
				<ul>
					<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?m=200611" title="November 2006">November 2006</a></li>
	<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?m=200610" title="October 2006">October 2006</a></li>
	<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?m=200609" title="September 2006">September 2006</a></li>
				</ul>
			</li>

			<li class="navhead"><h2>Categories</h2></li>
			<li class="navbody">
				<ul>
					<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts filed under cml">cml</a> (7)
</li>
	<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=2" title="View all posts filed under general">general</a> (3)
</li>
	<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=3" title="View all posts filed under tutorial">tutorial</a> (4)
</li>
	<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=1" title="View all posts filed under Uncategorized">Uncategorized</a> (1)
</li>
				</ul>
			</li>

								<li id="linkcat-1"><h2>Blogroll</h2>
	<ul>
<li><a href="http://wwmm.ch.cam.ac.uk/">World-Wide Molecular Matrix</a></li>

	</ul>
</li>
	<li id="linkcat-2"><h2>Blue Obelisk</h2>
	<ul>
<li><a href="http://wiki.cubic.uni-koeln.de/bowiki/index.php/BlueObeliskBlogs" title="List of all blogs of Blue Obelisk members">Blue Obelisk Blogs</a></li>
<li><a href="http://www.blueobelisk.org/" title="A virtual community devoted to interoperability in chemical informatics">The Blue Obelisk</a></li>

	</ul>
</li>

				<li class="navhead"><h2>Admin</h2></li>
				<li class="navbody">
				<ul>
					<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/">Site Admin</a></li>					<li><a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-login.php?action=logout">Logout</a></li>
					<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
									</ul>
				</li>
						<form method="get" id="searchform" action="http://wwmm.ch.cam.ac.uk/blogs/cml/">
<div><input value="" name="s" id="s" type="text">
<input id="searchsubmit" value="Search" type="submit">
</div>
</form>
<!--Creative Commons License--><a rel="license" href="http://creativecommons.org/licenses/by-nc/2.0/uk/"><img alt="Creative Commons License" src="blog2_files/somerights20.png" border="0"></a><br>This work is licenced under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/2.0/uk/">Creative Commons Licence</a>.<!--/Creative Commons License--><!-- <rdf:RDF xmlns="http://web.resource.org/cc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
	<Work rdf:about="">
		<license rdf:resource="http://creativecommons.org/licenses/by-nc/2.0/uk/" />
	<dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
	</Work>
	<License rdf:about="http://creativecommons.org/licenses/by-nc/2.0/uk/"><permits rdf:resource="http://web.resource.org/cc/Reproduction"/><permits rdf:resource="http://web.resource.org/cc/Distribution"/><requires rdf:resource="http://web.resource.org/cc/Notice"/><requires rdf:resource="http://web.resource.org/cc/Attribution"/><prohibits rdf:resource="http://web.resource.org/cc/CommercialUse"/><permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/></License></rdf:RDF> -->
                     </ul>
		</div>


    </div>
    <div class="center">
      <div class="authrole">
        <div class="authrole_head">&nbsp;</div>
        <div class="authrole_body">
          <p class="author">
            The CML Blog </p>
          <p class="desc"> Blogging Chemical Markup Language          </p>
        </div>
        <div class="authrole_foot">&nbsp;</div>
      </div>
          	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=22" rel="bookmark" title="Permanent Link to â€œRunningâ€? JUMBO">
                â€œRunningâ€? JUMBO - November 30th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>You cannot â€œrunâ€? JUMBO (it has no unique main()) but you can take it for a walk in the following waysâ€¦</p>
<p>JUMBO contains over 2000 units tests. These were written primarily
to test the correctness and robustness of the code against
modification. However they also act as good examples of how to use the
code. So to see JUMBO walking, run the unit tests in Eclipse (jumbo53 |
right-click | Run as â€¦ Junit Test). This will run through all the tests
- ignore any warnings in the output at present.</p>
<p>You can browse the unit tests in Eclipse, of course, but you can also see the HTML on SF at:</p>
<p>http://cml.cvs.sourceforge.net/cml/jumbo53/src/org/xmlcml/cml/element/test</p>
<p>and look at an individual class such as <a target="_blank" href="http://cml.cvs.sourceforge.net/cml/jumbo53/src/org/xmlcml/cml/element/test/CMLMoleculeTest.java?revision=1.8&amp;view=markup">CMLMoleculeTest</a>:</p>
<p>Hereâ€™s a typical test (to transform coordinates):<code></code></p>
<pre>550&nbsp;&nbsp;&nbsp;&nbsp; public void testTransformFractionalCoordinatesTransform3() { 551&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMLMolecule mol0 = (CMLMolecule) parseValidString( 552&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "&amp;lt;molecule " 553&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + CML_XMLNS 554&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + "&gt;" 555&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + "&nbsp;&nbsp;&amp;lt;atomArray&gt;" 556&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + "&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;atom id='a1' elementType='N' x3='1.0' y3='2.0' z3='3.0'</pre>
<pre>xFract='0.1' yFract='0.2' zFract='0.3'/&gt;" 557&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + "&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;atom id='a2' elementType='O' x3='1.8' y3='2.8' z3='3.8'</pre>
<pre>xFract='0.15' yFract='0.25' zFract='0.35'/&gt;" 558&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + "&nbsp;&nbsp;&amp;lt;/atomArray&gt;" + "&amp;lt;/molecule&gt;" 559&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + ""); 560&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMLMolecule mol = new CMLMolecule(mol0); 561&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMLTransform3 tr = new CMLTransform3(new double[] { 562&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1, 0, 0, 0, 563&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0, -1, 0, 0.5, 564&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0,&nbsp;&nbsp;0, -1, 0.25, 565&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0, 0, 0, 1 }); 566&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mol.transformFractionalCoordinates(tr); 567&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMLAtom atom0 = mol.getAtom(0); 568&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Point3Test.assertEquals("transform", new double[] { 1, 2, 3 }, atom0 569&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .getXYZ3(), EPS); 570&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Point3Test.assertEquals("transform", new double[] { 0.1, 0.3, -0.05 }, 571&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; atom0.getXYZFract(), EPS); 572&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Assert.assertEquals("transform", "N", atom0.getElementType()); 573&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Assert.assertEquals("transform", "a1", atom0.getId()); 574&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMLAtom atom1 = mol.getAtom(1); 575&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Point3Test.assertEquals("transform", 576&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new double[] { 0.15, 0.25, -0.10 }, atom1.getXYZFract(), EPS); 577&nbsp;&nbsp;&nbsp;&nbsp; } 578</pre>
<p>Lines 550-559 generate a molecule from the XML representation.
(CML_XMLNS represents the CML namespace declaration, and
parseValidString() is a convenience method to apply CMLBuilder() to
this string).</p>
<p>line 560 clones the molecule</p>
<p>561-565 creates a transform3 object</p>
<p>566 applies the transformation</p>
<p>567 extracts a typical atom (after transformation)</p>
<p>568 tests that the cartesians have been transformed OK</p>
<p>570 does the same for the fractionals</p>
<p>572-573 checks the atom is the right one</p>
<p>574 clones the atom</p>
<p>575 checks it has the correct fractional coordinates
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=1" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=22">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=22#respond" title="Comment on â€œRunningâ€? JUMBO">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=20" rel="bookmark" title="Permanent Link to JUMBO5.3beta">
                JUMBO5.3beta - November 30th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>This
describes the release of JUMBO5.3beta. Itâ€™s an early adopter release.
If you donâ€™t know anything about XML and Java and CML youâ€™ll need to
read some of the basic docs. If you do, and have been waiting for a
stable JUMBO, pitch right in.</p>
<p>After you have unpacked JUMBO youâ€™ll see something like this (yes, Iâ€™m still using Windows <img src="blog2_files/icon_sad.gif" alt=":-(" class="wp-smiley">  ).</p>
<table border="1">
<tbody><tr>
<td><img id="image19" alt="jumbo53.bmp" src="blog2_files/jumbo53.bmp">..</td>
<td><img alt="jumbo53a.bmp" id="image21" src="blog2_files/jumbo53a.bmp"></td>
</tr>
</tbody></table>
<p>The left is the top tier of directories; the right is the expanded src tree. The main features are:</p>
<ul>
<li><strong>docs</strong> contains (a) <strong>apidocs</strong> (autogenerated from the Java source). If you arenâ€™t a programmer, neglect these to start with (b) <strong>html</strong>:
human-written docs. We shall add to these over the next few days. If
you donâ€™t know what CML is for a good place to start is with the â€œ<strong>papers</strong>â€?
section where there are some introductory overviews. Beware - some of
the older papers may have a few obsolete usages, but generally the
methodology is correct and valuable.</li>
<li><strong>lib </strong>contains the jar files necessary to run JUMBO. Donâ€™t poke these.</li>
<li><strong>src </strong>contains the source code and examples. More below.</li>
<li><strong>target </strong>may be absent and holds the outputs autogenerated by JUMBO when run in Eclipse or under maven/ant.</li>
</ul>
<p>The src directory contains:</p>
<ul>
<li><strong>cml</strong>. The root of most of the code. This contains:</li>
</ul>
<blockquote>
<ol>
<li><strong>base</strong>. Superclasses (CMLElements and attributes) and various utilities</li>
<li><strong>element</strong>. The main CML classes</li>
<li>element/<strong>test</strong>. Unit tests for these. These may be moved in maven distributions. These are a useful source of CML examples.</li>
<li>element/test/<strong>examples</strong>. A wide range of examples, most of which are exercised by the unit tests. (a) <strong>complex </strong>are real-life examples (b) <strong>experimental </strong>tests the fragment builder and other classes under development (c) <strong>xsd </strong>holds the per-element examples. <strong>units </strong>and <strong>dict </strong>are copies of dictionaries to support the examples.</li>
</ol>
</blockquote>
<ul>
<li><strong>tools</strong>. More powerful or complex classes to manage
conversions, normalizations, mappings, etc. Many of the important
classes (molecule, spectrum, etc.) have a tool which helps prevent
bloat.</li>
</ul>
<blockquote>
<ol>
<li><strong>geom1</strong>. holds fragments for building</li>
</ol>
</blockquote>
<blockquote>
<ul>
<li><strong>euclid</strong>. Library utilities for numbers and geometry</li>
<li><strong>molutil</strong>. Periodic table and other data.</li>
</ul>
<p>JUMBO itself has no main() so you cannot â€œrunâ€? JUMBO (and clicking
the jar makes little sense). The next post describes what JUMBO can do.
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=3" title="View all posts in tutorial" rel="category tag">tutorial</a>,  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts in cml" rel="category tag">cml</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=20">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=20#respond" title="Comment on JUMBO5.3beta">No Comments Â»</a></p>
          </blockquote></div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=18" rel="bookmark" title="Permanent Link to JUMBO release">
                JUMBO release - November 30th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>Today
we are getting ready to release a version of JUMBO. This is quite
complicated and hasnâ€™t happened for a long time. (The â€œrelease early
release oftenâ€? mantra is satisfied by the â€œnightlyâ€? builds on SF to the
extent that when we commit code we make sure that the unit tests build.
(I am now using this blog as a primary means of writing documentation,
so I shall copy this directly into the distro).<br>
Releasing JUMBO is complex because:</p>
<ul>
<li>JUMBO depends on the CML schema. Every time the schema is updated,
we need to revise JUMBO. This is NOT automatic, nor - as you will see
in later posts - could it be.</li>
<li>Some JUMBO code is autogenerated from the schema. This is a rather
hairy process because the generated code has to be compiled before the
rest of JUMBO will compile. This does not work well under Eclipse due
to its lazy approach. It is rather better with ant.</li>
<li>JUMBO is large. Itâ€™s over 100,000 lines and so itâ€™s easy to get
lost. That means that there are bits of stuff from past ice ages which
need to be discovered and removed. Iâ€™m getting better at that</li>
<li>The schema is informed by per-element examples, so the examples
have to be updated every time the schema changes. the examples are run
in the normal unit tests, but mainly to check that they are
syntactically correct - we donâ€™t check values.</li>
<li>The schema is also informed by application examples. Those are real
working documents in CML and they have to be kept in synch with the
schema.</li>
<li>Many of the tests depend on data in files. They canâ€™t be just
anywhere - they have to be in the right relation to the classes. We
think we have sorted this but there are always likely to be initial
porting problems</li>
<li>There have to be sufficient docs to be useful. Thatâ€™s what Iâ€™m currently doing (see next post)</li>
<li>There were libraries and apps which had cyclic dependencies. Thus <tt>crystalTool</tt>
would be tested with CIF data. This meant that CIF libraries had to be
distributed with JUMBO. We are now separating the CIF functionality
from the CMLCrystal functionality. The CIF is used to <strong>create</strong> the test data but doesnâ€™t have to be present.</li>
<li></li>
</ul>
<p>So the current approach is:</p>
<ul>
<li>allow development on the current head (developers will so far notice no difference)</li>
<li>freeze the current CVS (called JUMBO5.3 currently)â€¦</li>
<li>clean the frozen version (â€?JUMBO5.3b1â€³) and add necessary enhancements to docs, examples, etc.</li>
<li>release as a zip/tgz which contains a binary jar and all the source, examples, docs</li>
<li>â€¦ move the current development to JUMBO5.4 and move to SVN.</li>
<li>make only minor bugfixes (no feature-creep) on the frozen version (JUMBO5.3.b2â€¦)</li>
<li>finally release JUMBO5.3.jar</li>
</ul>
<p>The jars will be the first for a long time. Early adopters can try out the betas. The next post tells how to understand them.
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts in cml" rel="category tag">cml</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=18">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=18#respond" title="Comment on JUMBO release">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=17" rel="bookmark" title="Permanent Link to How do we use CML properly?">
                How do we use CML properly? - November 25th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>In his <a target="_blank" href="http://blog.chembark.com/">ChemBark</a> blog Paul Bracher asks:<a title="Permanent Link to Help needed: How do we use CML properly?" rel="bookmark" href="http://blog.chembark.com/2006/11/25/help-needed-how-do-we-use-cml-properly/"> Help needed: How do we use CML properly?</a></p>
<p>He asks some very reasonable queries and Iâ€™ll answer them both here
an on his blog comments - you may find yourself having to switch
between them. Iâ€™m not quite sure where the discussion will end up.</p>
<blockquote><p>Bear with us for this post as we send out the bat signal to attract the chemical informatics crowd. Iâ€™m talking about the <a target="_blank" title="Peter Murray-Rust's Blog" href="http://wwmm.ch.cam.ac.uk/murrayrust/">Peter Murray-Rusts</a>
of the world, who draw their superpowers from the glow of fluorescent
lighting as they sit and hammer out code for hours on end.</p></blockquote>
<p>(He does not yet realise most of us are actually pan dimensional hyperbeings. Of course we donâ€™t have lives in the human sense).</p>
<blockquote><p>On their blogs, <a target="_blank" title="Joerg Wegner on Minable Chemical Information in Blogs" href="http://miningdrugs.blogspot.com/2006/11/blogging-chemistry-means-not-blogging.html">Joerg Wegner</a> and <a target="_blank" title="Peter Murray-Rust on CML in Blogs" href="http://wwmm.ch.cam.ac.uk/murrayrust/?p=175">Murray-Rust</a> took the rest of the chemistry blogosphere to task for not including more minable data, using standards such as <a target="_blank" title="Wikipedia Post on Chemical Markup Language" href="http://en.wikipedia.org/wiki/Chemical_Markup_Language">Chemical Markup Language</a> (CML). CML is used to include <a target="_blank" title="Wikipedia Page on Metadata" href="http://en.wikipedia.org/wiki/Metadata">metadata</a>
on chemical structures and compounds that people post on the Internet.
While itâ€™s essentially invisible to human readers, search engines can
use the extra data to sift through content on the Internet more
efficiently for information that is specific to user-defined queries
about chemical structures or substructures.</p></blockquote>
<p>A good analysis</p>
<blockquote><p>Aside from that gibberish in the last paragraph, we know <em>nothing</em>
about the subject of informatics and making chemically-minable data.
Since weâ€™re basically starting this blog from scratch, we want to try
to get all the informatics stuff right from the beginning.</p></blockquote>
<p>This is a wonderful motivation, Paul and weâ€™ll try to respond.</p>
<blockquote><p>I notice that using the latest version of ChemDraw
(Ultra 9), you can save structures as CML files (in addition to the
â€œusualâ€? .cdx). Where is the proper place to put this CML code? In the
image file? Can it go anywhere in the blog post?</p></blockquote>
<p>In principle CML - like other XML languages such as MathML - can be
mixed with XHTML. Unfortunately blogs donâ€™t do XHTML very well yet. It
may take a year or so for the world to sort this out. So donâ€™t try to
put CML in the blog. Thatâ€™s a great pity, but it shouldnâ€™t last for
long.</p>
<blockquote><p>We also have the following questions:</p>
<p>1. Is CML the â€œstandardâ€? way of including structural information in
electronic form? For instance, how does SciFinder or Beilstein store
this information? If they donâ€™t use CML, why donâ€™t we just do it the
way these programs do it, since they are the main tools already used by
chemists?</p></blockquote>
<p>There is no â€œstandardâ€? way of including structural information in
chemistry - there are about 10 main file types and many others in use.
Iâ€™ll discuss the pluses and minuses of CML and the other formats in
later posts.</p>
<blockquote><p>2. How do you recommend tagging images of chemical
structures? Is a name and CAS number good? Is this unnecessary if the
CML data is in there?</p></blockquote>
<p>It depends what you want to do. If you want to index organic
structures, then I think the InChI is the best way to do it. The
problem with CAS numbers is there is no way to look them up without
subscribing to CAS. And also that if the molecule hasnâ€™t been formally
published it wonâ€™t be in CAS.</p>
<blockquote><p>3.  Is there anything else weâ€™re missing?</p></blockquote>
<p>Iâ€™ll cover these in my comments on your blog.</p>
<blockquote><p>Thanks!</p></blockquote>
<p>and likewise</p>
<p>(Read more on <a target="_blank" href="http://blog.chembark.com/2006/11/25/help-needed-how-do-we-use-cml-properly/#comment-16">comments to Paul</a>: )
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=2" title="View all posts in general" rel="category tag">general</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=17">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=17#respond" title="Comment on How do we use CML properly?">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=13" rel="bookmark" title="Permanent Link to Flexibility in CML">
                Flexibility in CML - November 15th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>As
CML becomes more widely deployed we find that there are an increasing
number of ways in which it can be used. Sub-groups want the flexibility
of expressing their own domains without CML â€œgetting in the wayâ€? -
after all itâ€™s meant to be extensible. This post reviews some of those
parts of CML which are fixed and those which are fluid.</p>
<p>The main thesis of CML is that there are a number of CMLElements which are <i>context-independent</i> as far as software is concerned. Letâ€™s take molecule again:</p>
<pre>&amp;lt;cml:molecule id="m1" title="Carbon Monoxide"
&nbsp;&nbsp;&nbsp;&nbsp;xmlns:cml="http://www.xml-cml.org/schema"&gt;
&nbsp;&nbsp;&amp;lt;cml:atomArray&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:atom id="a1" elementType="C" x2="0" y2="0"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:atom id="a2" elementType="O" x2="0" y2="100"/&gt;
&nbsp;&nbsp;&amp;lt;/cml:atomArray&gt;
&nbsp;&nbsp;&amp;lt;cml:bondArray&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:bond id="b1" atomRefs2="a1 a2" order="T"/&gt;
&nbsp;&nbsp;&amp;lt;/cml:bondArray&gt;
&amp;lt;/cml:molecule&gt;
</pre>
<p>All CML-aware software should be able to process this <i>in some way</i>.
It is possible to have CML applications where the atoms and bonds are
unimportant in the domain. This might happen in parts of bioscience
where the components of a metabolic pathway were represented by coarse
grained concepts, e.g.</p>
<pre>&amp;lt;cml:molecule id="m2" title="Carbon Monoxide"
&nbsp;&nbsp;&nbsp;&nbsp;xmlns:cml="http://www.xml-cml.org/schema"/&gt;
</pre>
<p>in other applications (e.g. computational chemistry we might need a different set of information, e.g.</p>
<pre>&amp;lt;cml:molecule id="m3"
&nbsp;&nbsp;&nbsp;&nbsp;xmlns:cml="http://www.xml-cml.org/schema"&gt;
&nbsp;&nbsp;&amp;lt;cml:atomArray&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:atom id="a1" elementType="C" x3="0" y3="0" z3="0"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:atom id="a2" elementType="O" x3="0" y3="0" z3="1.1"/&gt;
&nbsp;&nbsp;&amp;lt;/cml:atomArray&gt;
&amp;lt;/cml:molecule&gt;
</pre>
<p>Notice that here there is no title, but there are 3D coordinates.
(By default CML uses Angstrom for coordinates - it is possible to use
other units and Iâ€™ll address that later. This was an early design
decision and possibly not a happy one - nearly everywhere else CML
insists on units.). Also notice that there are no bonds - many
theoretical models do not require bonds or even recognise their
existence. </p>
<p>So what does processing software do with any of these? What is
shouldnâ€™t do is crash. There are two main approaches to software in XML
- that which makes assumptions about what it is going to find and that
that doesnâ€™t. These are sometimes called â€œpullâ€? and â€œpushâ€?. They are
also exemplified to some extent by the SAX and DOM approaches.</p>
<p>JUMBO uses the DOM approach (it actually uses SAX to build the DOM). So it can the same command to read <i>any</i> CML document:</p>
<pre>Document doc = new Builder().parse(file);
</pre>
<p>Assuming the XML is well-formed this will never fail. (The only
downside of the DOM is that it requires the whole document to be read
into memory). Software might then try to find out if there are any
molecules in the document. Hereâ€™s a possible strategy (even if you
arenâ€™t a programmer you should be able to follow the logic; Iâ€™m also
simplifying bits):</p>
<p>List<node> molecules = CMLUtil.getQueryNodes(doc, â€œ.//cml:moleculeâ€?, â€¦);</node></p>
<p>This is a simple utility in JUMBOâ€™s CMLUtil library that uses XQuery
(part of the XML toolkit) to search the document for chunks of
information (â€?nodesâ€?). The address (â€?.//cml:moleculeâ€?) says - â€œsearch
the whole document for any element with name <tt>cml:molecule</tt>â€œ.
The (â€?.//â€?) is very powerful and is a wonderful way of finding parts of
documents. Here is a simple XQuery for all speeches (in Jon Bosakâ€™s XML
edition) by HAMLET:</p>
<pre>List&lt;Node&gt; hamletSpeeches = 
&nbsp;&nbsp;&nbsp;&nbsp;CMLUtil.getQueryNodes(shakespeare, ".//SPEECH[SPEAKER='HAMLET']", ...);
</pre>
<p>It doesnâ€™t matter where the speeches are in the play - XQuert will find them all. Hopefully you start to get the power of it.</p>
<p>So CML-aware software often uses this approach. (There are other
tools such as XSLT which use the same philosophy in a different syntax.
And almost all major languages except FORTRAN (and Toby White is
working in this area) support XQuery).</p>
<p>Letâ€™s consider 3 programs:</p>
<ul>
<li>Jmol. Draws molecule as a beautiful 3-D rotatable object.</li>
<li>JChempaint. Draws and edits 2-D molecule</li>
<li>JSpecView. Display interactive spectra in CML.</li>
</ul>
<p>Hereâ€™s a table of â€œreasonable behaviourâ€?:</p>
<table>
<tbody><tr>
<th>Molecule</th>
<th>Jmol</th>
<th>JChempaint</th>
<th>JSpecView</th>
</tr>
<tr>
<td>m1</td>
<td>â€œCanâ€™t display; no 3-D coordinatesâ€?</td>
<td>Draws beautiful chemical diagram</td>
<td>â€œCanâ€™t display; no spectrumâ€?</td>
</tr>
<tr>
<td>m2</td>
<td>â€œCanâ€™t display; no atomsâ€?</td>
<td>â€œCanâ€™t display; no atomsâ€?</td>
<td>â€œCanâ€™t display; no spectrumâ€?</td>
</tr>
<tr><td>m1</td>
<td>Draws beautiful 3-D rotatable molecule</td>
<td>No bonds: Displays two isolated atoms (C and O)</td>
<td>â€œCanâ€™t display; no spectrumâ€?</td>
</tr>
</tbody></table>
<p>So the general philosophy of CML is: â€œIf I can find something I
understand, do something reasonable with it.â€? The action should not
depend on the parts of the document that the program cannot interpret.
If a program finds a molecule with 3D coordinates it should be able to
display it without worrying about whether there is a spectrum, a
reaction, etc. that hasnâ€™t been interpreted. That is what I mean by
context-independence. </p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts in cml" rel="category tag">cml</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=13">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=13#respond" title="Comment on Flexibility in CML">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=12" rel="bookmark" title="Permanent Link to molecule, atom, bond">
                molecule, atom, bond - November 14th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p><i>I have changed the title of this to try to stop the angle brackets fouling up plate and other feeds</i></p>
<p>Molecules, atoms and bonds are a good place to start in
understanding the practice and philosophy of CML. Letâ€™s start with an
example (in this post we use an explicit CML namespace prefix):</p>
<pre>&amp;lt;cml:molecule id="m1" title="Carbon Monoxide"
&nbsp;&nbsp;&nbsp;&nbsp;xmlns:cml="http://www.xml-cml.org/schema"&gt;
&nbsp;&nbsp;&amp;lt;cml:atomArray&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:atom id="a1" elementType="C" x2="0" y2="0"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:atom id="a2" elementType="O" x2="0" y2="100"/&gt;
&nbsp;&nbsp;&amp;lt;/cml:atomArray&gt;
&nbsp;&nbsp;&amp;lt;cml:bondArray&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;cml:bond id="b1" atomRefs2="a1 a2" order="T"/&gt;
&nbsp;&nbsp;&amp;lt;/cml:bondArray&gt;
&amp;lt;/cml:molecule&gt;
</pre>
<p>What does this mean? Reading from the top:</p>
<ul>
<li>There is a single <i>root element</i> with local name <tt>molecule</tt> belonging to namespace <tt>http://www.xml-cml.org/schema</tt>. (Remember that in CML each section is called an <i>element</i>.) The namespace has a prefix <tt>cml</tt> which is attached to all CML elements.</li>
<li> The <tt>molecule</tt> has two <i>attribute</i>s: <tt>id</tt> and <tt>title</tt>. The value for <tt>id</tt>
is â€œm1â€³. It is very valuable to put IDs on most elements as it helps
the machine locate them and youâ€™ll see this strategy in many XML
documents. The title is a human readable attribute and itâ€™s value
doesnâ€™t normally mean anything to the machine. Many elements in CML
will benefit from having <tt>id</tt> and <tt>title</tt> attributes. (Note that all element and attribute names are case-sensitive).</li>
<li>The <tt>molecule</tt> has two <i>child elements</i>, <tt>atomArray</tt> and <tt>bondArray</tt>. The <tt>atomArray</tt> has two <tt>atom</tt> children and the <tt>bondArray</tt> has one <tt>bond</tt>
child. This type of nesting is very common in XML. The order of the
children is defined and may matter (though in CML most order is
deliberately unimportant).</li>
<li>The atoms have four attributes each. The <tt>id</tt>s are essential
as they are the only way the machine knows how to locate the atoms. All
other attributes are optional. In this case we assert that the atoms
have <tt>elementType</tt>s which give the element symbols (it might have been better to choose this term but itâ€™s too late now). The values are from a <i>controlled vocabulary</i>
- i.e. they have to come from the IUPAC periodic table. There are also
X and Y 2-coordinates. These are solely for â€œdrawing the molecule on
paperâ€? and for defining wedge/hatch and cis/trans stereochemistry. They
have no relation to the 3-D coordinates or the fractional coordinates.
Itâ€™s perfectly allowable to have an atom without any coordinates of any
sort. In some cases it could be possible to have atoms without element
symbols. In fact we anticipate that almost any combination or omission
of attributes is possible.</li>
<li>The bonds also use attributes. The <tt>atomRefs2</tt> attribute is
very common and depicts the atoms in a 2-atom bond. It references their
ids and it is an error if atoms with those ids cannot be found. The
bond order is symbolic and in this case uses <tt>T</tt> to mean triple..</li>
</ul>
<p>In total, therefore, the CML represents a molecule with 2 atoms (C
and O) joined by a triple bond. Other molecules may be larger but most
CML molecules will use the same strategy.</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts in cml" rel="category tag">cml</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=12">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=12#comments" title="Comment on molecule, atom, bond">3 Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=16" rel="bookmark" title="Permanent Link to Tables-3">
                Tables-3 - November 13th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>Wow!
I have found out how to write the CML/XML prettily. It was the evil
â€œrich editorâ€? that does it. Switching it off and typing native XHTML
(which I prefer) solves the problem. So, on with the tablesâ€¦</p>
<p>So here is our first table yet again:</p>
<table border="1">
<tbody><tr>
<th>Time (sec)</th>
<th>Temp (K)</th>
</tr>
<tr>
<td>10.0</td>
<td>280</td>
</tr>
<tr>
<td>20.0</td>
<td>290</td>
</tr>
<tr>
<td>30.0</td>
<td>285</td>
</tr>
<tr>
<td>40.0</td>
<td>287</td>
</tr>
</tbody></table>
<h2>Column-based (array) format</h2>
<p>As a result of extensions to the language thereâ€™s a small change to the column-based array format:</p>
<pre>&amp;lt;table title="thermal history" id="tab1" tableType="columnBased"&gt;
&nbsp;&nbsp;&amp;lt;arrayList&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;array id="tab1.1" title="time after start"&nbsp;&nbsp;dictRef="acme:reactiontime"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"&gt;10.0 20.0 30.0 40.0&amp;lt;/array&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;array id="tab2.2" title="observed temperature"&nbsp;&nbsp;dictRef="acme:obstemp"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"&gt;280 290 285 287&amp;lt;/array&gt;
&nbsp;&nbsp;&amp;lt;/arrayList&gt;
&amp;lt;/table&gt;
</pre>
<p>We have now wrapped the arrays in a new element, &lt;arrayList. Why?
Itâ€™s a change from the current spec, will break current software and
seems more complicated. The reason is that there is a demand for other
formats and there needs to be more structure.</p>
<h2>Row-based format</h2>
<p>In many disciplines the rows in tables are emphasized and in
relational tables rows (tuples) are the normal way of adding or
removing information. So our table now looks like:</p>
<pre>&amp;lt;table border="1" tableType="rowBased"&gt;
&nbsp;&nbsp;&amp;lt;tableHeader&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableHeaderCell id="tab1.1" title="time after start"&nbsp;&nbsp;dictRef="acme:reactiontime"
&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableHeaderCell id="tab2.2" title="observed temperature"&nbsp;&nbsp;dictRef="acme:obstemp"
&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"/&gt;
&nbsp;&nbsp;&amp;lt;/tableHeader&gt;
&nbsp;&nbsp;&amp;lt;tableRowList&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableRow&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;10.0&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;280&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/tableRow&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableRow&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;20.0&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;290&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/tableRow&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableRow&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;30.0&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;285&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/tableRow&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableRow&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;40.0&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableCell&gt;287&amp;lt;/tableCell&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/tableRow&gt;
&nbsp;&nbsp;&amp;lt;/tableRowList&gt;
&lt;lt;/table&gt;
</pre>
<p>This now emphasizes the rows - in fact it has the same structure as
XHTML tables. But XHTML is presentational and has no simple mechanism
for adding semantics to rows or columns. So we introduce the concept of
<tt>tableHeader</tt> - which provides the semantics for each column. Itâ€™s not very different from the use of <b>tr/th</b> in XHTML. However to make a complete separation we introduce yet another element, <tt>tableRowList</tt>. This is purely a container for <tt>tableRow</tt>s.</p>
<p>So we have added a lot of complexity (6 new elements and a new data
structure). Was that a good idea? Iâ€™m not sure. On the one hand it
makes it easier for users (who are used the XHTML and relational data)
and on the other makes it harder for developers. Itâ€™s not <i>too</i> difficult to convert between them, so I hope it turns out to be useful. (Perhaps we should have gone the whole way and created <tt>rowBaseTable</tt> and <tt>columnBasedTable</tt> as completely different elements. Who knows?)</p>
<p>It gets worse. Under prompting from the FORTRAN-based community (who
are very active in developing CML applications) there is a demand for a
minimal approach that mimics line-based output. The table could
therefore be written as:</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thermal history
&nbsp;&nbsp;&nbsp;&nbsp;===============
&nbsp;&nbsp;&nbsp;&nbsp;Time (sec)&nbsp;&nbsp;&nbsp;&nbsp;Temp (K)
&nbsp;&nbsp;&nbsp;&nbsp;----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---
&nbsp;&nbsp;&nbsp;&nbsp;10.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;280
&nbsp;&nbsp;&nbsp;&nbsp;20.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;290 
&nbsp;&nbsp;&nbsp;&nbsp;30.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;285
&nbsp;&nbsp;&nbsp;&nbsp;40.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;287
</pre>
<p>where the markup is implied. This is also similar to comma-separated-value files (CSV) which may look like:</p>
<pre>Time (sec) , Temp (K)
10.0,280,
20.0,290,
30.0,285,
40.0,287,
</pre>
<p>This can, of course, be managed by the tableRow approach above, but
there is a worry that the ratio of markup to data is high, for memory,
processing time and bandwidth. These fears are probably unfounded, but
I have acceeded and come up with a third format:</p>
<pre>&amp;lt;table border="1" tableType="contentBased"&gt;
&nbsp;&nbsp;&amp;lt;tableHeader&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableHeaderCell id="tab1.1" title="time after start"&nbsp;&nbsp;dictRef="acme:reactiontime"
&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;tableHeaderCell id="tab2.2" title="observed temperature"&nbsp;&nbsp;dictRef="acme:obstemp"
&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"/&gt;
&nbsp;&nbsp;&amp;lt;/tableHeader&gt;
&nbsp;&nbsp;&amp;lt;tableContent rows="4" columns="2"&gt;
10.0 280
20.0 290
30.0 285
40.0 287
&amp;lt;/tableContent&gt;
</pre>
<p>So thatâ€™s the third format. Iâ€™ve implemented all of them in JUMBO
and shown they work and can be interconverted. There are some slight
nuances, but thatâ€™s enough for now.
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts in cml" rel="category tag">cml</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=16">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=16#respond" title="Comment on Tables-3">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=15" rel="bookmark" title="Permanent Link to Tables - 2">
                Tables - 2 - November 12th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>In
the last post I outlined the philosophy behind CML tables as
rectangular objects with homogeneous columns. This is, of course, very
similar to tables in relational databases (â€?fieldsâ€? or â€œattributesâ€? may
be used instead of â€œcolumnsâ€?, but note that an XML attribute is not the
same as a relational attribute). Unlike relational tables the order of
objects in a CML column is preserved and it can be though of as having
ordered rows (RDB tables have unordered rows).</p>
<p>So here is our first table again:</p>
<table border="1">
<tbody><tr>
<th>Time (sec)</th>
<th>Temp (K)</th>
</tr>
<tr>
<td>10.0</td>
<td>280</td>
</tr>
<tr>
<td>20.0</td>
<td>290</td>
</tr>
<tr>
<td>30.0</td>
<td>285</td>
</tr>
<tr>
<td>40.0</td>
<td>287</td>
</tr>
</tbody></table>
<p>but now we shall add the semantics:</p>
<pre>&amp;lt;table title="thermal history" id="tab1"&gt;
&nbsp;&nbsp;&amp;lt;array id="tab1.1" title="time after start"&nbsp;&nbsp;dictRef="acme:reactiontime"
&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"&gt;10.0 20.0 30.0 40.0&amp;lt;/array&gt;
&nbsp;&nbsp;&amp;lt;array id="tab2.2" title="observed temperature"&nbsp;&nbsp;dictRef="acme:obstemp"
&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"&gt;280 290 285 287&amp;lt;/array&gt;
&amp;lt;/table&gt;
</pre>
<p>(sorry that it looks horrid, but thatâ€™s WP).</p>
<p>So CML tables are based on semantic homogeneous columns and this is
how we managed tables until recently. If you organise your software to
write and read tables like this itâ€™s straightforward. And because
&lt;array&gt; is used in many other areas of CML there is a lot of
semantics and code we can borrow.<br>
However some users of CML found this unnatural. The column
based-approach means writing and reading vertically. However much
software (especially FORTRAN) is based on rows (or lines). Thatâ€™s why
itâ€™s called a lineprinter - it prints across the page line by line. In
a table this is a row-based approach. Thatâ€™s completely orthogonal.</p>
<p>So a major dilemma. If we say â€œyou have to use columnsâ€? then some of
the users and developers may moan and ultimately move away from CML. On
the other hand if we have two completely different ways of managing
tables we (that normally means PMR) have to support both, and there is
the added possible incompatibility of two different representations. In
general itâ€™s valuable to keep the language as small as possible.</p>
<p>However I gave in to demands. Those whose asked for rows have now
got them. They need to use them! The saving grace was that CML rows can
be very closely based on XHTML tables. Not exactly - we donâ€™t use the
actual markup in case it confuses software, but we now have:</p>
<ul>
<li>table</li>
<li>tableHeader</li>
<li>tableHeaderCell</li>
<li>tableRowList</li>
<li>tableRow</li>
<li>tableCell</li>
</ul>
<p>This is a lot more that the code has to support. However it is fairly<br>
straightforward (though still a lot of work). The structure for a row-based table is:</p>
<p>table<br>
â€¦tableHeader<br>
â€¦â€¦tableHeaderCell*<br>
â€¦tableRowList<br>
â€¦â€¦tableRow*<br>
â€¦â€¦â€¦tableCell*</p>
<p>(where * means 0 or many)</p>
<p>More in the next post
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts in cml" rel="category tag">cml</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=15">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=15#respond" title="Comment on Tables - 2">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=14" rel="bookmark" title="Permanent Link to Tables">
                Tables - November 12th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>Iâ€™ve
given up on Wordpress as a means of authoring XML or CML directly and
so I canâ€™t give any actual XML (other than the odd line). So this blog
will be more discursive than technical. Maybe thatâ€™s a good thing! So
here goes. Iâ€™ll pick some general topics in CML and see what happens.
Hopefully there will be some comments.</p>
<p>Over the last 4 weeks Justin Davies and I have been working on
Tables. Particularly tables that occur in publications and shipping
small to medium amounts of data. For very large data sets itâ€™s probably
better to look at HDF or NETCDF.</p>
<p>Why do we need tables, and why should CML bother - isnâ€™t it about
chemistry? Well, all sciences need tables to carry systematic
information and chemistry publications are full of tables. It would be
nice if someone had written a universally adopted spec and markup
language - weâ€™d certainly use it rather than write our own.</p>
<p>We might look at the <a target="_blank" href="http://www.oasis-open.org/specs/tablemodels.php">CALS</a>
spec which is widely used in industry. But the specs are from 1995
(SGML DTDs rather than XML Schema) and emphasize formatting as well as
content. For science we are primarily interested in content, rather
than format.</p>
<p>We can also look at the XHTML spec (and in fact that informs some of
the current design). The XHTML spec is very versatile, but that can be
a problem - itâ€™s often used for things that are not semantic tables -
e.g. layout of pages, pretty formatting for certainly semistructured
objects, etc.</p>
<p>But what is a table? In CML we define it to be a 2D rectangular
collection of data objects, which is homogeneous in at least one
direction. By convention we select the â€œcolumnsâ€? as being homogeneous.
That doesnâ€™t mean it cannot be laid out with them horizontal if we need
to. In general a table has columns with different semantics - if all
the objects have exactly the same semantics it is better to use a
matrix. Here are some examples:</p>
<h2>Column-based table</h2>
<table border="1">
<tbody><tr>
<th>Time (sec)</th>
<th>Temp (K)</th>
</tr>
<tr>
<td>10.0</td>
<td>280</td>
</tr>
<tr>
<td>20.0</td>
<td>290</td>
</tr>
<tr>
<td>30.0</td>
<td>285</td>
</tr>
<tr>
<td>40.0</td>
<td>287</td>
</tr>
</tbody></table>
<p>This is easy to hold in a data structure and weâ€™ll see how later. Itâ€™s an ideal CML &lt;table&gt;.</p>
<h2>Rotation Matrix</h2>
<table border="1">
<tbody><tr>
<td>0.0</td>
<td>1.0</td>
<td>0.0</td>
</tr>
<tr>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr>
<td>1.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
</tbody></table>
<p>This is also well structured, but CML has specific tools for
&lt;matrix&gt; and there is lots of support for matrix operations.
(symmetric, square, triangular, etc.)</p>
<h2>A non-rectangular table</h2>
<table border="1">
<tbody><tr>
<th colspan="2">Treated</th>
<th colspan="2">Untreated</th>
</tr>
<tr>
<th>Time (sec)</th>
<th>Temp (K)</th>
<th>Time (sec)</th>
<th>Temp (K)</th>
</tr>
<tr>
<td>10.0</td>
<td>280</td>
<td>10.0</td>
<td>281</td>
</tr>
<tr>
<td>20.0</td>
<td>290</td>
<td>20.0</td>
<td>see Ref1</td>
</tr>
<tr>
<td>30.0</td>
<td>285</td>
<td>30.0</td>
<td>Decomposed</td>
</tr>
<tr>
<td>40.0</td>
<td>287</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody></table>
<p>This last example shows the problems with â€œtablesâ€?. Itâ€™s all done in
HTML but itâ€™s not rectangular and itâ€™s not homogeneous. Itâ€™s difficult
to devise the right data structure for it. It could be best to split it
into two tables - teated and untreated, or it might be worth having a
CML table with four columns - time, treated temp, untreated temp, and
notes.</p>
<h2>Semantics</h2>
<p>Scientific data always have semantics attached - unfortunately they
are often implicit. So in the first table we can guess that â€œtempâ€?
means temperature and K means Kelvin, but itâ€™s only a guess. CML
therefore requires the use of several attributes to add semantics. An
example for column1 might be:</p>
<pre>&amp;lt;array id="a123" title="time after start"&nbsp;&nbsp;dictRef="acme:obstemp"
&nbsp;&nbsp;&nbsp;&nbsp;dataType="xsd:float" units="u:sec"&gt;10.0 20.0 30.0 40.0&amp;lt;/array&gt;
</pre>
<p>Each column can have (and usually should have):</p>
<ul>
<li><b>id</b> (unique id). This is usually not visible, but machines love ids and they should be used wherever possible.</li>
<li><b>title</b>. This is human readable only and while it may be
useful for text searches it is a fragile way of describing something
precisely.</li>
<li><b>dictRef</b> (pointer to dictionary entry). This is one of the
major features in CMLâ€™s power and flexibility. The namespace prefix
(acme) maps to a unique namespaceURI which allows anyone in the world
to create their own dictionaries without clashes. obstemp points to an
entry in this dictionary describing the precise semantics of the
concept.</li>
<li><b>dataType</b>. usually xsd:string, xsd:integer, xsd:float.</li>
<li><b>units</b>. essential for any physical quantity. Points to a units dictionary (there can be many of these by using namespaces)</li>
</ul>
<p>That wasnâ€™t too painful, either for me or - I hope - you. In the next post Iâ€™ll show how the tables might be arranged.
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=4" title="View all posts in cml" rel="category tag">cml</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=14">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=14#respond" title="Comment on Tables">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
        	<div class="cssbox">
          <div class="cssbox_head">&nbsp;</div>
	  <div class="cssbox_body">
	    <div class="post_title">
	      <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=11" rel="bookmark" title="Permanent Link to What does CML cover?">
                What does CML cover? - October 4th, 2006 
              </a>
              <hr>
	    </div>

	    <p>
              </p><p>I have been so distracted by the other blog that this one has been neglected for a monthâ€¦</p>
<p>CML is designed to represent much chemistry in current chemical
publications. It should also be possible to create undergraduate
textbooks and some reserach monographs in CML. The ideas are simple
since many chemical concepts are 100+ years old and well standardized.
The baic objects we deal with are:</p>
<ul>
<li>molecules containing atoms and bonds.</li>
<li>substances besides molecules</li>
<li>properties of molecules and substances</li>
<li>reactions between molecules and substances, including conditions of the experiment.</li>
<li>computations of molecules, reactions and their properties</li>
<li>spectra of many sorts</li>
<li>crystalline and solid systems</li>
<li>polymers (under construction)</li>
</ul>
<p>To do this we have created about 50 elements which are designed to
be simple enough to implement but powerful enough to support a wide
range of chemistry. It should be possible to understand a CML document
with few surprises. In most cases it is easy to construct them, though
there are times when the semantics themselves are fuzzy and that means
there is flexibility in the representation.</p>
<p>Chemistry is a physical science and there are many concepts that are
common to other disciplines, such as temperature, pressure, melting
point, etc. We do not create specific elements for each of these, but
use a generic approach based on data structure, data type and
dictionaries. This also includes scientific units of measure. This
combination is&nbsp; very powerful and allows tens of thousands of
concepts to be easily represented in CML.</p>
<p>In the next posts I shall cover some of these in greater depth.
</p>
            
            <p class="postmetadata">Posted in <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?cat=2" title="View all posts in general" rel="category tag">general</a> | <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/wp-admin/post.php?action=edit&amp;post=11">Edit</a> |  <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/?p=11#respond" title="Comment on What does CML cover?">No Comments Â»</a></p>
          </div>
          <div class="cssbox_foot">&nbsp;</div>
        </div>
                <div class="navigation">
          <div class="alignleft">
            <a href="http://wwmm.ch.cam.ac.uk/blogs/cml/index.php?paged=2">Â« Previous Entries</a>          </div>
          <div class="alignright">
            </div>
          </div>
        </div>
        </div>


<hr>
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
		The CML Blog is proudly powered by 
		<a href="http://wordpress.org/">WordPress</a>
		<br><a href="feed://http//wwmm.ch.cam.ac.uk/blogs/cml/?feed=rss2">Entries (RSS)</a>
		and <a href="feed://http//wwmm.ch.cam.ac.uk/blogs/cml/?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 20 queries. 0.403 seconds. -->
	
</div>


<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		
</body></html>